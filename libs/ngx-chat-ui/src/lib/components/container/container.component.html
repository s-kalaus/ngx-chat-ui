<ng-container *ngTemplateOutlet="template; context: {
  chatKey: chatKey,
  response: response
}"></ng-container>

<ng-template
  #containerTemplateDefault
  let-chatKey="chatKey"
  let-response="response"
>
  <ngx-chat-ui-message-list
    [chatKey]="chatKey"
  ></ngx-chat-ui-message-list>
  <ngx-chat-ui-action
    [chatKey]="chatKey"
    (response)="response.emit($event)"
  ></ngx-chat-ui-action>
</ng-template>

<ng-template
  #messageTypingTemplateDefault
  let-partner="partner"
>
  <div
    *ngIf="partner"
    class="ngx-chat-ui-message-typing"
  >{{ partner.firstName }}</div>
</ng-template>

<ng-template
  #messageListTemplateDefault
  let-messages="messages"
  let-chatKey="chatKey"
  let-trackByFn="trackByFn"
>
  <div class="ngx-chat-ui-message-spacer"></div>
  <ngx-chat-ui-message-item
    *ngFor="let message of messages; trackBy: trackByFn"
    [class.ngx-chat-ui-message-item-incoming]="message.isIncoming"
    [chatKey]="chatKey"
    [message]="message"
  ></ngx-chat-ui-message-item>
  <ngx-chat-ui-message-typing
    [chatKey]="chatKey"
  ></ngx-chat-ui-message-typing>
</ng-template>

<ng-template
  #messageItemTemplateDefault
  let-message="message"
>
  <ngx-chat-ui-message-partner
    [chatKey]="chatKey"
    [message]="message"
  ></ngx-chat-ui-message-partner>
  <ngx-chat-ui-message-meta
    [chatKey]="chatKey"
    [message]="message"
  ></ngx-chat-ui-message-meta>
  <ngx-chat-ui-message-payload
    *ngIf="message.payload"
    [chatKey]="chatKey"
    [message]="message"
  ></ngx-chat-ui-message-payload>
</ng-template>

<ng-template
  #messagePartnerTemplateDefault
  let-message="message"
>
  {{message.partner.firstName}}
</ng-template>

<ng-template
  #messageMetaTemplateDefault
  let-message="message"
>
  {{message.date}}
</ng-template>

<ng-template
  #messagePayloadTemplate
  let-message="message"
  let-MessageType="MessageType"
>
  <ng-container [ngSwitch]="message.payload.type">
    <ngx-chat-ui-message-payload-text
      *ngSwitchCase="MessageType.text"
      [chatKey]="chatKey"
      [message]="message"
    ></ngx-chat-ui-message-payload-text>
    <ngx-chat-ui-message-payload-select
      *ngSwitchCase="MessageType.select"
      [chatKey]="chatKey"
      [message]="message"
    ></ngx-chat-ui-message-payload-select>
    <ngx-chat-ui-message-payload-zipcode
      *ngSwitchCase="MessageType.zipcode"
      [chatKey]="chatKey"
      [message]="message"
    ></ngx-chat-ui-message-payload-zipcode>
  </ng-container>
</ng-template>

<ng-template
  #messagePayloadTextTemplateDefault
  let-message="message"
>
  {{message.payload.text}}
</ng-template>

<ng-template
  #messagePayloadSelectTemplateDefault
  let-message="message"
  let-item="item"
>
  <div
    class="ngx-chat-ui-action-select-item-icon"
    *ngIf="item.icon"
  >{{ item.icon }}</div>
  <div
    class="ngx-chat-ui-action-select-item-text"
    *ngIf="item.text"
  >{{ item.text }}</div>
</ng-template>

<ng-template
  #messagePayloadZipcodeTemplateDefault
  let-message="message"
>
  {{message.payload.zipcode}}
</ng-template>

<ng-template
  #actionTemplate
  let-message="message"
  let-MessageType="MessageType"
  let-chatKey="chatKey"
  let-response="response"
  let-isSending="isSending"
>
  <div
    *ngIf="message && message.action"
    [class.ngx-chat-ui-action-sending]="isSending"
    [ngSwitch]="message.action.type"
  >
    <ngx-chat-ui-action-text
      *ngSwitchCase="MessageType.text"
      [chatKey]="chatKey"
      [message]="message"
      (response)="response.emit($event)"
    ></ngx-chat-ui-action-text>
    <ngx-chat-ui-action-select
      *ngSwitchCase="MessageType.select"
      [chatKey]="chatKey"
      [message]="message"
      (response)="response.emit($event)"
    ></ngx-chat-ui-action-select>
    <ngx-chat-ui-action-zipcode
      *ngSwitchCase="MessageType.zipcode"
      [chatKey]="chatKey"
      [message]="message"
      (response)="response.emit($event)"
    ></ngx-chat-ui-action-zipcode>
  </div>
</ng-template>

<ng-template
  #actionTextTemplateDefault
  let-message="message"
  let-submit="submit"
  let-form="form"
>
  <form
    novalidate
    [formGroup]="form"
    (ngSubmit)="submit()"
  >
    <input
      formControlName="text"
      type="text"
    >
    <button></button>
  </form>
</ng-template>

<ng-template
  #actionSelectTemplateDefault
  let-message="message"
  let-submit="submit"
>
  <div class="ngx-chat-ui-message-spacer"></div>
  <ngx-chat-ui-action-select-item
    *ngFor="let item of message.action.items"
    [item]="item"
    (response)="submit($event)"
  ></ngx-chat-ui-action-select-item>
</ng-template>

<ng-template
  #actionSelectItemTemplateDefault
  let-item="item"
  let-response="response"
>
  <a
    (click)="response.emit(item)"
    [ngClass]="item.className || ''"
    href="javascript:;"
  >
    <span
      class="ngx-chat-ui-action-select-item-icon"
      *ngIf="item.icon"
    >{{ item.icon }}</span>
    <span
      class="ngx-chat-ui-action-select-item-text"
      *ngIf="item.text"
    >{{ item.text }}</span>
  </a>
</ng-template>

<ng-template
  #actionZipcodeTemplateDefault
  let-message
  let-submit="submit"
  let-form="form"
>
  <form
    novalidate
    [formGroup]="form"
    (ngSubmit)="submit()"
  >
    <input
      formControlName="zipcode"
      type="text"
    >
    <button></button>
  </form>
</ng-template>
